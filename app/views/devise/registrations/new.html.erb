<div class="d-flex flex-column align-items-center">
  <h1 class="mb-3">Sign up</h1>
  
  <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
    <%= render "devise/shared/error_messages", resource: resource %>
    <h3>Step 1: Personal Info</h3>
    <div class="field">
      <%= f.label :name %><br />
      <%= f.text_field :name, autofocus: true, autocomplete: "name" %>
    </div>
  
    <div class="field">
      <%= f.label :email %><br />
      <%= f.email_field :email, autofocus: true, autocomplete: "email" %>
    </div>
  
    <div class="field">
      <%= f.label :password %>
      <% if @minimum_password_length %>
      <em>(<%= @minimum_password_length %> characters minimum)</em>
      <% end %><br />
      <%= f.password_field :password, autocomplete: "new-password" %>
    </div>
  
    <div class="field">
      <%= f.label :password_confirmation %><br />
      <%= f.password_field :password_confirmation, autocomplete: "new-password" %>
    </div>
  
  
      <h3 class="my-3">Step 2: Choose an account type</h3>
  
  
      <button id="buyer-btn" class="btn btn-outline-primary">I want to buy books</button>
      <button id="seller-btn" class="btn btn-outline-primary">I want to sell books</button>
  
      <br>
  
    <%= f.select(:role, options_for_select(%w[buyer seller], selected: 'buyer' || nil), {}, {id:'role-select', class:'invisible'}) %>
      <div id="user-info"></div>
  
      <br>
  
    <div class="actions">
      <%= f.submit "Sign up", {class: 'btn btn-success'} %>
    </div>
  
  
    <script>
  
    const sellerBtn = document.getElementById("seller-btn")
    const buyerBtn = document.getElementById("buyer-btn")
    const roleSelect = document.getElementById("role-select")
    const inputContainer = document.getElementById("user-info")
  
    sellerBtn.addEventListener('click', (e) => {
      e.preventDefault();
      createContactForm('Address')
      setRole('seller')
    })
  
    buyerBtn.addEventListener('click', (e) => {
      e.preventDefault();
      createContactForm('Phone')
      setRole('buyer')
    })
  
    const createContactForm = (contactInfo) => {
      const input = document.createElement('div')
      if (inputContainer.innerHTML !== '') { inputContainer.innerHTML = ''}
      let userContactInfo = `<label for="user_user_info">${contactInfo}</label><br /><input autofocus="autofocus" autocomplete="Enter your ${contactInfo}" type="text" value="" name="user[user_info][${contactInfo.toLowerCase()}]" id="user_user_info">`
      input.innerHTML = userContactInfo
      inputContainer.appendChild(input)
    }
  
    const setRole = (role) => {
      roleSelect.value = role
    }
  
  </script>
  <% end %>
  
  
  <%= render "devise/shared/links" %>
</div>
